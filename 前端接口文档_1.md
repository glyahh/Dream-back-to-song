# 梦回宋朝 · 前端接口需求文档

> 本文档基于 UniApp 小程序前端页面梳理，用于指导后端 API 开发。  
> 项目：梦回宋朝（宋韵文化主题小程序）

---

## 一、通用约定

### 1.1 请求基础

| 项目 | 说明 |
|------|------|
| 基础路径 | `https://{API_DOMAIN}/api` |
| 请求头 | `Content-Type: application/json`，鉴权接口需携带 `Authorization: Bearer {token}` |
| 字符编码 | UTF-8 |

### 1.2 统一响应格式

```json
{
  "code": 0,
  "message": "success",
  "data": {}
}
```

- `code`: 0 表示成功，非 0 表示业务错误码
- `message`: 提示信息
- `data`: 业务数据，可为对象或数组

### 1.3 分页约定

- 请求参数：`page`（页码，从 1 开始）、`pageSize`（每页条数，默认 10）
- 响应中 `data` 建议包含：`list`（列表）、`total`（总条数）、`hasMore`（是否有更多）

### 1.4 错误码

| 错误码 | 含义 |
|--------|------|
| 0 | 成功 |
| 401 | 未登录或 token 失效 |
| 403 | 无权限 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

---

## 二、认证模块

### 2.1 发送短信验证码

| 项目 | 说明 |
|------|------|
| 用途 | 手机号登录前获取 6 位验证码 |
| 方法 | POST |
| 路径 | `/auth/send-code` |

**请求体：**

```json
{
  "phone": "13800138000"
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| phone | string | 是 | 11 位手机号 |

**响应：**

```json
{
  "code": 0,
  "message": "验证码已发送",
  "data": null
}
```

**说明：** 验证码有效期建议 5 分钟；同一手机号 60 秒内不可重复发送。

---

### 2.2 验证码登录

| 项目 | 说明 |
|------|------|
| 用途 | 使用手机号 + 验证码登录，获取 token |
| 方法 | POST |
| 路径 | `/auth/login` |

**请求体：**

```json
{
  "phone": "13800138000",
  "code": "123456"
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| phone | string | 是 | 11 位手机号 |
| code | string | 是 | 6 位验证码 |

**响应：**

```json
{
  "code": 0,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "expiresIn": 86400,
    "user": {
      "id": "user_xxx",
      "phone": "13800138000",
      "nickname": "烟雨朦胧",
      "avatar": "https://cdn.example.com/avatar.png",
      "bio": "",
      "createdAt": "2026-01-01T00:00:00Z"
    }
  }
}
```

---

### 2.3 退出登录

| 项目 | 说明 |
|------|------|
| 用途 | 服务端使 token 失效 |
| 方法 | POST |
| 路径 | `/auth/logout` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "message": "已退出",
  "data": null
}
```

---

## 三、用户模块

### 3.1 获取当前用户资料

| 项目 | 说明 |
|------|------|
| 用途 | 我的页面、编辑资料页加载用户信息 |
| 方法 | GET |
| 路径 | `/user/profile` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "id": "user_xxx",
    "phone": "13800138000",
    "nickname": "烟雨朦胧",
    "avatar": "https://cdn.example.com/avatar.png",
    "bio": "可以写一写此刻心情或与宋朝的缘分",
    "createdAt": "2026-01-01T00:00:00Z",
    "updatedAt": "2026-02-01T12:00:00Z"
  }
}
```

---

### 3.2 更新用户资料

| 项目 | 说明 |
|------|------|
| 用途 | 编辑资料页保存昵称、头像、签名 |
| 方法 | PUT 或 PATCH |
| 路径 | `/user/profile` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "nickname": "烟雨朦胧",
  "avatar": "https://cdn.example.com/avatar.png",
  "bio": "可以写一写此刻心情或与宋朝的缘分"
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| nickname | string | 是 | 昵称，最多 16 字 |
| avatar | string | 否 | 头像 URL |
| bio | string | 否 | 一句话签名，最多 40 字 |

**响应：** 返回更新后的完整用户资料，结构同 3.1。

---

### 3.3 上传头像

| 项目 | 说明 |
|------|------|
| 用途 | 更换头像时上传图片，返回可访问 URL |
| 方法 | POST |
| 路径 | `/user/upload-avatar` |
| 鉴权 | 是 |
| Content-Type | multipart/form-data |

**请求体：** `file` 字段为图片文件。

**响应：**

```json
{
  "code": 0,
  "data": {
    "url": "https://cdn.example.com/avatars/xxx.jpg"
  }
}
```

---

### 3.4 同步用户设置

| 项目 | 说明 |
|------|------|
| 用途 | 设置页「消息通知」「声音提示」「节省流量模式」等同步到服务端 |
| 方法 | PUT |
| 路径 | `/user/settings` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "notify": true,
  "sound": true,
  "dataSaver": false
}
```

**响应：** `code: 0` 即可。

---

## 四、商品/集市模块

### 商品前后端调用与缓存逻辑

| 数据类型 | 示例字段 | 缓存策略 | 说明 |
|----------|----------|----------|------|
| 商品基础信息 | 名称、描述、图片、常规价格 | **可缓存** | 建议缓存过期时间 30 分钟，兼顾加载速度与定期更新 |
| 库存、活动价 | stock、promoPrice、活动倒计时 | **不缓存** | 实时性要求高，每次均请求后端获取最新数据 |

**前端调用建议：**

- 列表页、详情页可优先展示缓存的商品基础信息，再异步请求库存/活动价做补充展示。
- 加购、结算、提交订单前必须请求最新库存与活动价，避免超卖或价格不一致。

---

### 4.1 获取商品列表

| 项目 | 说明 |
|------|------|
| 用途 | 集市首页、新品速递、系列好物、全部商品 |
| 方法 | GET |
| 路径 | `/products` |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | string | 否 | `new` 新品 / `series` 系列 / 不传为全部 |
| keyword | string | 否 | 搜索关键词 |
| page | int | 否 | 页码，默认 1 |
| pageSize | int | 否 | 每页条数，默认 10 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": 101,
        "name": "汴梁旧帖",
        "desc": "宋风雅韵 · 复古信笺 · 手写质感",
        "img": "https://cdn.example.com/汴梁旧帖.png",
        "images": ["https://cdn.example.com/汴梁旧帖.png", "https://cdn.example.com/汴梁旧帖2.png"],
        "price": "28",
        "originPrice": "36",
        "tag": "新品",
        "tags": ["包邮", "满减"],
        "sales": "已售800+",
        "shop": "宋韵文创",
        "styles": [{ "id": 1, "name": "青山远黛", "thumb": "https://cdn.example.com/thumb.png" }]
      }
    ],
    "total": 20,
    "hasMore": true
  }
}
```

---

### 4.2 获取商品详情

| 项目 | 说明 |
|------|------|
| 用途 | 商品详情页 |
| 方法 | GET |
| 路径 | `/products/:id` |

**响应：**

```json
{
  "code": 0,
  "data": {
    "id": 101,
    "name": "千里江山图系列餐盘-青山远黛",
    "subtitle": "源于千里江山图",
    "desc": "青绿山水，陶瓷餐盘，家用款",
    "price": "48",
    "originPrice": "",
    "images": ["https://cdn.example.com/1.png", "https://cdn.example.com/2.png"],
    "styles": [
      { "id": 1, "name": "青山远黛", "thumb": "https://cdn.example.com/thumb1.png" },
      { "id": 2, "name": "青绿流苏", "thumb": "https://cdn.example.com/thumb2.png" }
    ],
    "tagLabels": ["包邮", "换购"],
    "sales": "销量1200+",
    "shop": "宋韵文创",
    "shippingFrom": "四川成都",
    "service": "破损包退・极速退款・售后保障"
  }
}
```

---

### 4.3 获取热门/轮播商品

| 项目 | 说明 |
|------|------|
| 用途 | 集市首页热门商品、轮播图 |
| 方法 | GET |
| 路径 | `/products/featured` |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | string | 否 | `hot` 热门商品 / `carousel` 轮播图 |

**响应：** 结构同 4.1 的 list，或轮播图结构 `{ image, title, link }`。

---

## 五、购物车模块

### 5.1 获取购物车

| 项目 | 说明 |
|------|------|
| 用途 | 集市页、结算页加载购物车 |
| 方法 | GET |
| 路径 | `/cart` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "items": [
      {
        "productId": "101",
        "qty": 2,
        "product": {
          "id": 101,
          "name": "汴梁旧帖",
          "img": "https://cdn.example.com/xxx.png",
          "price": "28",
          "originPrice": "36"
        },
        "subtotal": "56.00"
      }
    ],
    "totalCount": 2,
    "totalPrice": "56.00",
    "totalDiscount": "16.00"
  }
}
```

---

### 5.2 更新购物车项

| 项目 | 说明 |
|------|------|
| 用途 | 加购、减购、修改数量 |
| 方法 | POST |
| 路径 | `/cart/items` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "productId": "101",
  "qty": 2
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| productId | string | 是 | 商品 ID |
| qty | int | 是 | 数量，0 表示删除该商品 |

**响应：** 返回最新购物车结构，同 5.1。

---

### 5.3 批量更新购物车

| 项目 | 说明 |
|------|------|
| 用途 | 从本地同步到服务端、批量增减 |
| 方法 | PUT |
| 路径 | `/cart` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "items": [
    { "productId": "101", "qty": 2 },
    { "productId": "102", "qty": 0 }
  ]
}
```

**响应：** 同 5.1。

---

## 六、订单模块

### 6.1 创建订单

| 项目 | 说明 |
|------|------|
| 用途 | 从购物车结算或立即购买 |
| 方法 | POST |
| 路径 | `/orders` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "items": [
    { "productId": "101", "qty": 1, "styleId": 1 }
  ],
  "addressId": "addr_xxx",
  "remark": ""
}
```

**响应：**

```json
{
  "code": 0,
  "data": {
    "orderId": "order_xxx",
    "amount": 189,
    "status": "pending",
    "payUrl": "https://..."
  }
}
```

---

### 6.2 获取订单列表

| 项目 | 说明 |
|------|------|
| 用途 | 我的订单页，按状态筛选 |
| 方法 | GET |
| 路径 | `/orders` |
| 鉴权 | 是 |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| status | string | 否 | `all` / `pending` 待付款 / `shipped` 待收货 / `finished` 已完成 |
| page | int | 否 | 页码 |
| pageSize | int | 否 | 每页条数 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "order_xxx",
        "title": "汴河清赏 · 茶器礼盒",
        "desc": "一盏茶、一方木托，随手即是宋人茶席。",
        "img": "https://cdn.example.com/风荷雅盏.png",
        "time": "下单时间：2026-02-01 20:14",
        "status": "pending",
        "count": 1,
        "price": 189,
        "shopName": "宋风雅集 · 官方店"
      }
    ],
    "total": 5,
    "hasMore": false
  }
}
```

---

### 6.3 获取订单详情

| 项目 | 说明 |
|------|------|
| 用途 | 订单详情页 |
| 方法 | GET |
| 路径 | `/orders/:id` |
| 鉴权 | 是 |

**响应：** 订单完整信息，含商品明细、地址、物流等。

---

### 6.4 取消订单

| 项目 | 说明 |
|------|------|
| 用途 | 待付款订单取消 |
| 方法 | POST |
| 路径 | `/orders/:id/cancel` |
| 鉴权 | 是 |

**响应：** `code: 0` 即可。

---

### 6.5 支付订单

| 项目 | 说明 |
|------|------|
| 用途 | 待付款订单去支付 |
| 方法 | POST |
| 路径 | `/orders/:id/pay` |
| 鉴权 | 是 |

**请求体：** 视支付方式而定，如 `{ "payType": "wechat" }`。

**响应：** 返回支付所需参数（如微信支付 `payment` 对象）。

---

### 6.6 确认收货

| 项目 | 说明 |
|------|------|
| 用途 | 待收货订单确认收货 |
| 方法 | POST |
| 路径 | `/orders/:id/confirm` |
| 鉴权 | 是 |

**响应：** `code: 0` 即可。

---

### 6.7 获取物流信息

| 项目 | 说明 |
|------|------|
| 用途 | 已完成订单查看物流 |
| 方法 | GET |
| 路径 | `/orders/:id/logistics` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "company": "汴京驿站",
    "trackingNo": "SF1234567890",
    "traces": [
      { "time": "2026-02-02 10:00", "desc": "包裹已送达「汴京驿站」" }
    ]
  }
}
```

---

## 七、发现/内容流模块

### 7.1 获取轮播图

| 项目 | 说明 |
|------|------|
| 用途 | 发现页顶部轮播 |
| 方法 | GET |
| 路径 | `/discover/carousel` |

**响应：**

```json
{
  "code": 0,
  "data": [
    { "image": "https://cdn.example.com/1.png", "title": "", "link": "" },
    { "image": "https://cdn.example.com/2.png", "title": "宋代衣食住行", "link": "/pages/discover/topic_overview" }
  ]
}
```

---

### 7.2 获取话题列表

| 项目 | 说明 |
|------|------|
| 用途 | 话题广场 |
| 方法 | GET |
| 路径 | `/discover/topics` |

**响应：**

```json
{
  "code": 0,
  "data": [
    { "key": "life", "title": "#生活在宋朝", "image": "https://...", "link": "/pages/discover/topic_life" },
    { "key": "clothing", "title": "#宋韵服饰大赏", "image": "https://...", "link": "/pages/discover/topic_clothing" },
    { "key": "food", "title": "#宋朝美食盛宴", "image": "https://...", "link": "/pages/discover/topic_food" },
    { "key": "overview", "title": "#宋代衣食住行", "image": "https://...", "link": "/pages/discover/topic_overview" }
  ]
}
```

---

### 7.3 获取内容流（热门/关注）

| 项目 | 说明 |
|------|------|
| 用途 | 发现页热门列表、关注列表 |
| 方法 | GET |
| 路径 | `/discover/feed` |
| 鉴权 | 关注列表需鉴权 |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | string | 是 | `hot` 热门 / `follow` 关注 |
| keyword | string | 否 | 搜索关键词 |
| page | int | 否 | 页码 |
| pageSize | int | 否 | 每页条数 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "post_xxx",
        "username": "山河入梦",
        "avatar": "https://cdn.example.com/avatar.png",
        "time": "一天前",
        "text": "好喜欢这个配色",
        "images": ["https://cdn.example.com/1.png", "https://cdn.example.com/2.png"],
        "followed": false
      }
    ],
    "total": 10,
    "hasMore": true
  }
}
```

---

### 7.4 关注/取消关注用户

| 项目 | 说明 |
|------|------|
| 用途 | 发现页、我的关注页 |
| 方法 | POST |
| 路径 | `/discover/follow` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "targetUserId": "user_xxx",
  "action": "follow"
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| targetUserId | string | 是 | 被关注用户 ID |
| action | string | 是 | `follow` 关注 / `unfollow` 取消关注 |

**响应：** `code: 0` 即可。

---

## 八、收藏模块

### 8.1 获取收藏列表

| 项目 | 说明 |
|------|------|
| 用途 | 我的收藏页，分好物/内容 |
| 方法 | GET |
| 路径 | `/collections` |
| 鉴权 | 是 |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | string | 是 | `goods` 好物 / `notes` 内容 |

**响应：**

好物：

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "g1",
        "title": "汴梁旧帖 · 宣纸套装",
        "price": 56,
        "img": "https://cdn.example.com/xxx.png"
      }
    ]
  }
}
```

内容：

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "n1",
        "tag": "#生活在宋朝",
        "title": "如果在汴京开一家小茶肆",
        "excerpt": "门口挂一盏暖黄灯笼...",
        "from": "来自「发现 · 话题广场」",
        "time": "收藏于 01-20"
      }
    ]
  }
}
```

---

### 8.2 添加收藏

| 项目 | 说明 |
|------|------|
| 用途 | 商品详情、帖子等点击收藏 |
| 方法 | POST |
| 路径 | `/collections` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "type": "goods",
  "targetId": "101",
  "extra": {}
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| type | string | 是 | `goods` / `notes` |
| targetId | string | 是 | 商品 ID 或内容 ID |
| extra | object | 否 | 内容类型时存储 title、excerpt、from 等 |

---

### 8.3 取消收藏

| 项目 | 说明 |
|------|------|
| 用途 | 长按取消收藏 |
| 方法 | DELETE |
| 路径 | `/collections/:id` |
| 鉴权 | 是 |

**响应：** `code: 0` 即可。

---

### 8.4 检查是否已收藏

| 项目 | 说明 |
|------|------|
| 用途 | 商品/内容页展示收藏状态 |
| 方法 | GET |
| 路径 | `/collections/check` |

**查询参数：** `type=goods&targetId=101`

**响应：**

```json
{
  "code": 0,
  "data": { "collected": true, "collectionId": "c_xxx" }
}
```

---

## 九、创作模块

### 9.1 获取创作列表

| 项目 | 说明 |
|------|------|
| 用途 | 我的创作页 |
| 方法 | GET |
| 路径 | `/creations` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "c1",
        "title": "浅绛团花褙子草图",
        "type": "服饰设计",
        "excerpt": "试着把宋画里的团花纹样移到褙子下摆...",
        "content": "全文内容",
        "time": "2026-02-01 晚上",
        "words": 68,
        "mood": "心静如水",
        "createdAt": "2026-02-01T20:00:00Z"
      }
    ]
  }
}
```

---

### 9.2 创建创作

| 项目 | 说明 |
|------|------|
| 用途 | 新建创作 |
| 方法 | POST |
| 路径 | `/creations` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "title": "浅绛团花褙子草图",
  "type": "服饰设计",
  "content": "试着把宋画里的团花纹样移到褙子下摆，底色用淡绛..."
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| title | string | 是 | 标题 |
| type | string | 是 | 服饰设计/饮食随笔/建筑手稿/出行见闻/其他 |
| content | string | 是 | 正文，最多 400 字 |

**响应：** 返回完整创作对象。

---

### 9.3 获取创作详情

| 项目 | 说明 |
|------|------|
| 用途 | 创作详情/预览 |
| 方法 | GET |
| 路径 | `/creations/:id` |
| 鉴权 | 是 |

---

### 9.4 删除创作

| 项目 | 说明 |
|------|------|
| 用途 | 删除我的创作 |
| 方法 | DELETE |
| 路径 | `/creations/:id` |
| 鉴权 | 是 |

---

## 十、发布/帖子模块

### 10.1 获取我的发布列表

| 项目 | 说明 |
|------|------|
| 用途 | 我的发布页 |
| 方法 | GET |
| 路径 | `/posts/my` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "p_xxx",
        "content": "分享一段此刻心情...",
        "time": "02月04日 14:30",
        "likes": 0,
        "liked": false,
        "topic": "#生活在宋朝",
        "createdAt": "2026-02-04T14:30:00Z"
      }
    ]
  }
}
```

---

### 10.2 发布内容

| 项目 | 说明 |
|------|------|
| 用途 | 发布一条动态 |
| 方法 | POST |
| 路径 | `/posts` |
| 鉴权 | 是 |

**请求体：**

```json
{
  "content": "分享一段此刻心情、今日所见的宋风片段……",
  "topic": "#生活在宋朝",
  "images": []
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| content | string | 是 | 正文，最多 120 字 |
| topic | string | 否 | 话题标签 |
| images | array | 否 | 图片 URL 数组 |

---

### 10.3 删除发布

| 项目 | 说明 |
|------|------|
| 用途 | 删除我的发布 |
| 方法 | DELETE |
| 路径 | `/posts/:id` |
| 鉴权 | 是 |

---

### 10.4 点赞/取消点赞

| 项目 | 说明 |
|------|------|
| 用途 | 帖子点赞 |
| 方法 | POST |
| 路径 | `/posts/:id/like` |
| 鉴权 | 是 |

**请求体：** `{ "action": "like" }` 或 `{ "action": "unlike" }`

**响应：** `{ "code": 0, "data": { "likes": 1, "liked": true } }`

---

## 十一、关注模块

### 11.1 获取关注列表

| 项目 | 说明 |
|------|------|
| 用途 | 我的关注页 |
| 方法 | GET |
| 路径 | `/following` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "user_shanhe",
        "name": "山河入梦",
        "avatar": "https://cdn.example.com/1.png",
        "desc": "偏爱浅色宋服与旧画册。",
        "meta": "近期常在「宋韵服饰大赏」分享搭配",
        "followed": true
      }
    ]
  }
}
```

---

### 11.2 私信

| 项目 | 说明 |
|------|------|
| 用途 | 向关注用户发送招呼/私信 |
| 方法 | POST |
| 路径 | `/following/:userId/message` |
| 鉴权 | 是 |

**请求体：** `{ "content": "你好" }`

**响应：** `code: 0` 即可。

---

## 十二、消息模块

### 12.1 获取消息列表

| 项目 | 说明 |
|------|------|
| 用途 | 消息通知页，按类型筛选 |
| 方法 | GET |
| 路径 | `/messages` |
| 鉴权 | 是 |

**查询参数：**

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| category | string | 否 | `system` 系统 / `social` 互动 / `order` 订单 |
| page | int | 否 | 页码 |
| pageSize | int | 否 | 每页条数 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "m1",
        "category": "system",
        "title": "欢迎来到「梦回宋朝」",
        "preview": "为你准备了一份宋风指南...",
        "content": "完整内容",
        "time": "昨天 21:40",
        "read": false
      }
    ],
    "total": 5,
    "hasMore": false
  }
}
```

---

### 12.2 标记已读

| 项目 | 说明 |
|------|------|
| 用途 | 点击消息后标记已读 |
| 方法 | POST |
| 路径 | `/messages/:id/read` |
| 鉴权 | 是 |

---

### 12.3 获取未读数

| 项目 | 说明 |
|------|------|
| 用途 | 消息 Tab 角标、设置页提醒 |
| 方法 | GET |
| 路径 | `/messages/unread-count` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "system": 1,
    "social": 1,
    "order": 0,
    "total": 2
  }
}
```

---

## 十三、反馈模块

### 13.1 提交反馈

| 项目 | 说明 |
|------|------|
| 用途 | 意见反馈页提交 |
| 方法 | POST |
| 路径 | `/feedback` |
| 鉴权 | 否（可选，登录用户可关联） |

**请求体：**

```json
{
  "rate": 5,
  "tags": ["界面设计", "交互体验"],
  "content": "可以写下你喜欢/不喜欢的部分...",
  "contact": "email@example.com"
}
```

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| rate | int | 是 | 1–5 星评分 |
| tags | array | 否 | 反馈类型标签 |
| content | string | 是 | 具体描述，最多 300 字 |
| contact | string | 否 | 联系方式 |

---

### 13.2 获取反馈历史

| 项目 | 说明 |
|------|------|
| 用途 | 意见反馈页展示最近反馈 |
| 方法 | GET |
| 路径 | `/feedback/history` |
| 鉴权 | 是 |

**响应：**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": "f_xxx",
        "time": "2026-02-01 14:30",
        "content": "反馈内容摘要"
      }
    ]
  }
}
```

---

## 十四、附录

### 14.1 数据字典

**订单状态：**

| 值 | 说明 |
|----|------|
| pending | 待付款 |
| paid | 已支付 |
| shipped | 待收货 |
| finished | 已完成 |
| cancelled | 已取消 |

**创作类型：**

| 值 | 说明 |
|----|------|
| 服饰设计 | 服饰设计 |
| 饮食随笔 | 饮食随笔 |
| 建筑手稿 | 建筑手稿 |
| 出行见闻 | 出行见闻 |
| 其他 | 其他 |

**消息分类：**

| 值 | 说明 |
|----|------|
| system | 系统通知 |
| social | 互动消息 |
| order | 订单消息 |

---

### 14.2 前端页面与接口对应

| 页面路径 | 主要接口 |
|----------|----------|
| pages/login/phone | 2.1 发送验证码、2.2 登录 |
| pages/me/me | 3.1 用户资料 |
| pages/me/profile-edit | 3.1、3.2、3.3 用户资料 |
| pages/me/settings | 3.4 设置、2.3 退出登录 |
| pages/market/market | 4.1、4.3、5.1、5.2 商品、购物车 |
| pages/market/detail | 4.2、5.2、8.2、8.4 商品详情、购物车、收藏 |
| pages/market/all | 4.1 商品列表 |
| pages/me/orders | 6.2、6.4、6.5、6.6、6.7 订单 |
| pages/discover/discover | 7.1、7.2、7.3、7.4 发现、内容流、关注 |
| pages/me/collections | 8.1、8.3 收藏 |
| pages/me/creations | 9.1、9.2 创作 |
| pages/me/posts | 10.1、10.2、10.3、10.4 发布 |
| pages/me/following | 11.1、11.2、7.4 关注 |
| pages/me/messages | 12.1、12.2、12.3 消息 |
| pages/me/feedback | 13.1、13.2 反馈 |

---

### 14.3 版本与更新

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2026-02-04 | 初版，基于当前前端页面整理 |

---

> 文档结束。如有新增页面或字段调整，请同步更新本文档并与后端对齐。

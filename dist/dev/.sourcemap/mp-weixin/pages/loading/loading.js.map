{"version":3,"file":"loading.js","sources":["pages/loading/loading.vue","../uniPage:/cGFnZXMvbG9hZGluZy9sb2FkaW5nLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"loading-container\">\r\n    <!-- 跳过按钮（最后一张不显示） -->\r\n    <view v-if=\"showSkipBtn\" class=\"skip-btn\" @click=\"handleSkip\">\r\n      <text class=\"skip-text\">跳过</text>\r\n    </view>\r\n\r\n    <!-- 第一页（独立显示，3秒后隐藏） -->\r\n    <view v-if=\"showFirstPage\" class=\"first-page page-content page-1\" :class=\"{ 'page-1-animated': showAnimation }\">\r\n      <image class=\"page-bg-img\" src=\"/static/loading_page/load_1_bg.png\" mode=\"aspectFill\" />\r\n      <view class=\"first-page-content\">\r\n        <view class=\"word-wrapper\">\r\n          <image class=\"word-img\" src=\"/static/loading_page/load_1_word.png\" mode=\"widthFix\" />\r\n          <image class=\"logo-img\" src=\"/static/loading_page/load_1_logo.png\" mode=\"aspectFit\" />\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 后三页轮播图容器 -->\r\n    <view v-else class=\"swiper-container\">\r\n      <swiper\r\n        class=\"loading-swiper\"\r\n        :current=\"swiperIndex\"\r\n        @change=\"handleSwiperChange\"\r\n        :autoplay=\"false\"\r\n        :circular=\"false\"\r\n        :indicator-dots=\"false\"\r\n      >\r\n        <!-- 第二张图片 -->\r\n        <swiper-item class=\"swiper-item\">\r\n          <view class=\"page-content page-2-3-4\">\r\n            <view class=\"image-wrapper\">\r\n              <image class=\"page-img\" src=\"/static/loading_page/load_2_bg.png\" mode=\"aspectFit\" />\r\n            </view>\r\n            <view class=\"calligraphy-wrapper calligraphy-page-2\">\r\n              <text class=\"calligraphy-text calligraphy-right\">山色空蒙雨亦奇</text>\r\n              <text class=\"calligraphy-text calligraphy-left\">水光潋滟晴方好</text>\r\n            </view>\r\n          </view>\r\n        </swiper-item>\r\n\r\n        <!-- 第三张图片 -->\r\n        <swiper-item class=\"swiper-item\">\r\n          <view class=\"page-content page-2-3-4\">\r\n            <view class=\"image-wrapper\">\r\n              <image class=\"page-img\" src=\"/static/loading_page/load_3.png\" mode=\"aspectFit\" />\r\n            </view>\r\n            <view class=\"calligraphy-wrapper calligraphy-page-3\">\r\n              <text class=\"calligraphy-text calligraphy-right\">今宵酒醒何处</text>\r\n              <text class=\"calligraphy-text calligraphy-left\">杨柳岸晓风残月</text>\r\n            </view>\r\n          </view>\r\n        </swiper-item>\r\n\r\n        <!-- 第四张图片（带进入按钮） -->\r\n        <swiper-item class=\"swiper-item\">\r\n          <view class=\"page-content page-2-3-4 page-4\">\r\n            <view class=\"image-wrapper\">\r\n              <image class=\"page-img\" src=\"/static/loading_page/load_4.png\" mode=\"aspectFit\" />\r\n            </view>\r\n            <view class=\"calligraphy-wrapper\">\r\n              <text class=\"calligraphy-text calligraphy-right\">似曾相识燕归来</text>\r\n              <text class=\"calligraphy-text calligraphy-left\">无可奈何花落去</text>\r\n            </view>\r\n            <view class=\"enter-btn-wrapper\" @click=\"handleEnter\">\r\n              <text class=\"enter-text\">进入</text>\r\n            </view>\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n\r\n      <!-- 自定义指示器（只显示3个点，对应后三页） -->\r\n      <view v-if=\"swiperIndex < 2\" class=\"indicator-wrapper\">\r\n        <view\r\n          v-for=\"(item, index) in 3\"\r\n          :key=\"index\"\r\n          class=\"indicator-dot\"\r\n          :class=\"{ 'indicator-dot-active': swiperIndex === index }\"\r\n        ></view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      showFirstPage: true, // 是否显示第一页\r\n      showAnimation: false, // 第一页动画控制\r\n      swiperIndex: 0, // swiper当前索引（0-2，对应第2、3、4页）\r\n      autoPlayTimer: null, // 自动播放定时器\r\n      firstPageTimer: null, // 第一页等待定时器\r\n    }\r\n  },\r\n  onLoad() {\r\n    // 页面加载时启动第一页动画\r\n    this.startFirstPageAnimation()\r\n    // 3秒后自动切换到第二页\r\n    this.startFirstPageTimer()\r\n  },\r\n  onUnload() {\r\n    // 清理定时器\r\n    this.clearAllTimers()\r\n  },\r\n  computed: {\r\n    // 是否显示跳过按钮（最后一张不显示）\r\n    showSkipBtn() {\r\n      return !this.showFirstPage && this.swiperIndex !== 2\r\n    },\r\n  },\r\n  methods: {\r\n    // 启动第一页动画\r\n    startFirstPageAnimation() {\r\n      setTimeout(() => {\r\n        this.showAnimation = true\r\n      }, 100)\r\n    },\r\n    // 第一页等待3秒后切换到第二页\r\n    startFirstPageTimer() {\r\n      this.firstPageTimer = setTimeout(() => {\r\n        if (this.showFirstPage) {\r\n          this.showFirstPage = false\r\n          this.swiperIndex = 0\r\n          this.startAutoPlay()\r\n        }\r\n      }, 3000)\r\n    },\r\n    // 启动自动播放（5秒切换一页）\r\n    startAutoPlay() {\r\n      this.clearAutoPlayTimer()\r\n      this.autoPlayTimer = setInterval(() => {\r\n        if (this.swiperIndex < 2) {\r\n          this.swiperIndex++\r\n        } else {\r\n          // 如果是最后一页，停止自动播放\r\n          this.clearAutoPlayTimer()\r\n        }\r\n      }, 5000)\r\n    },\r\n    // 清理自动播放定时器\r\n    clearAutoPlayTimer() {\r\n      if (this.autoPlayTimer) {\r\n        clearInterval(this.autoPlayTimer)\r\n        this.autoPlayTimer = null\r\n      }\r\n    },\r\n    // 清理所有定时器\r\n    clearAllTimers() {\r\n      this.clearAutoPlayTimer()\r\n      if (this.firstPageTimer) {\r\n        clearTimeout(this.firstPageTimer)\r\n        this.firstPageTimer = null\r\n      }\r\n    },\r\n    // 轮播图切换事件\r\n    handleSwiperChange(e) {\r\n      const newIndex = e.detail.current\r\n      this.swiperIndex = newIndex\r\n      \r\n      // 切换后重新启动自动播放\r\n      if (this.swiperIndex < 2) {\r\n        this.startAutoPlay()\r\n      } else {\r\n        // 如果是最后一页，停止自动播放\r\n        this.clearAutoPlayTimer()\r\n      }\r\n    },\r\n    // 跳过按钮点击\r\n    handleSkip() {\r\n      this.clearAllTimers()\r\n      this.navigateToLogin()\r\n    },\r\n    // 进入按钮点击（最后一页）\r\n    handleEnter() {\r\n      this.clearAllTimers()\r\n      this.navigateToLogin()\r\n    },\r\n    // 跳转到登录页\r\n    navigateToLogin() {\r\n      uni.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loading-container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.skip-btn {\r\n  position: absolute;\r\n  top: 60rpx;\r\n  right: 40rpx;\r\n  z-index: 100;\r\n  width: 120rpx;\r\n  height: 60rpx;\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n  border-radius: 30rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.skip-text {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 400;\r\n}\r\n\r\n/* 第一页独立样式 */\r\n.first-page {\r\n  width: 100%;\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n}\r\n\r\n.first-page-content {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-left: 80rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.word-wrapper {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.word-img {\r\n  display: block;\r\n  width: 300rpx;\r\n  height: auto;\r\n}\r\n\r\n.logo-img {\r\n  position: absolute;\r\n  right: -50rpx;\r\n  bottom: -50rpx;\r\n  width: 100rpx;\r\n  height: 100rpx;\r\n  z-index: 10;\r\n}\r\n\r\n.swiper-container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  position: relative;\r\n  background-color: #F5F2EB;\r\n}\r\n\r\n.loading-swiper {\r\n  width: 100%;\r\n  height: 100vh;\r\n}\r\n\r\n.swiper-item {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.page-content {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.page-bg-img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/* 后三页样式 */\r\n.page-2-3-4 {\r\n  background-color: #F5F2EB;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.image-wrapper {\r\n  flex-shrink: 0;\r\n  width: 540rpx;\r\n  height: 540rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  z-index: 1;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  object-fit: cover;\r\n}\r\n\r\n.calligraphy-wrapper {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n  justify-content: flex-end;\r\n  width: 540rpx;\r\n  height: 540rpx;\r\n  padding-right: 0;\r\n  padding-left: 0;\r\n  padding-top: 0;\r\n  box-sizing: border-box;\r\n  z-index: 2;\r\n  pointer-events: none;\r\n}\r\n\r\n.calligraphy-text {\r\n  font-size: 46rpx;\r\n  color: #1a1a1a;\r\n  line-height: 1.15;\r\n  writing-mode: vertical-rl;\r\n  text-orientation: upright;\r\n  letter-spacing: 3rpx;\r\n  font-family: 'STXingkai', 'Xingkai SC', 'STHupo', 'Hupo SC', 'STKaiti', 'KaiTi', 'PingFang SC', 'Noto Sans SC', serif;\r\n  font-weight: 500;\r\n  display: inline-block;\r\n  white-space: nowrap;\r\n  text-shadow: 0 1rpx 3rpx rgba(0, 0, 0, 0.1);\r\n  opacity: 0.98;\r\n  font-style: normal;\r\n  pointer-events: none;\r\n}\r\n\r\n.calligraphy-right {\r\n  margin-right: 20rpx;\r\n  position: absolute;\r\n  right: 40rpx;\r\n  top: -360rpx;\r\n}\r\n\r\n.calligraphy-left {\r\n  margin-right: 0;\r\n  position: absolute;\r\n  right: 0;\r\n  top: -240rpx;\r\n}\r\n\r\n/* 第二张图片的文字位置调整（右高左低） */\r\n.calligraphy-page-2 .calligraphy-right {\r\n  top: -380rpx;\r\n}\r\n\r\n.calligraphy-page-2 .calligraphy-left {\r\n  top: -260rpx;\r\n}\r\n\r\n/* 第三张图片的文字位置调整（右高左低） */\r\n.calligraphy-page-3 .calligraphy-right {\r\n  top: -380rpx;\r\n}\r\n\r\n.calligraphy-page-3 .calligraphy-left {\r\n  top: -200rpx;\r\n}\r\n\r\n/* 第一页动画 */\r\n.page-1 {\r\n  opacity: 0;\r\n  transform: scale(1.05);\r\n  transition: opacity 2s ease-in-out, transform 2s ease-in-out;\r\n}\r\n\r\n.page-1-animated {\r\n  opacity: 1;\r\n  transform: scale(1);\r\n}\r\n\r\n/* 第四页样式（带进入按钮） */\r\n.page-4 {\r\n  position: relative;\r\n}\r\n\r\n.enter-btn-wrapper {\r\n  position: absolute;\r\n  bottom: 180rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 10;\r\n  width: 260rpx;\r\n  height: 88rpx;\r\n  background-color: #B0C4B0;\r\n  border-radius: 44rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.enter-text {\r\n  font-size: 34rpx;\r\n  color: #000;\r\n  font-weight: 500;\r\n  letter-spacing: 6rpx;\r\n}\r\n\r\n/* 自定义指示器 */\r\n.indicator-wrapper {\r\n  position: absolute;\r\n  bottom: 60rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.indicator-dot {\r\n  width: 12rpx;\r\n  height: 12rpx;\r\n  border-radius: 50%;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.indicator-dot-active {\r\n  width: 24rpx;\r\n  border-radius: 6rpx;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Dream-back-to-song/src/pages/loading/loading.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAqFA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,eAAe;AAAA;AAAA,MACf,eAAe;AAAA;AAAA,MACf,aAAa;AAAA;AAAA,MACb,eAAe;AAAA;AAAA,MACf,gBAAgB;AAAA;AAAA,IAClB;AAAA,EACF;AAAA,EACA,SAAS;AAEP,SAAK,wBAAuB;AAE5B,SAAK,oBAAmB;AAAA,EAC1B;AAAA,EACA,WAAW;AAET,SAAK,eAAc;AAAA,EACrB;AAAA,EACA,UAAU;AAAA;AAAA,IAER,cAAc;AACZ,aAAO,CAAC,KAAK,iBAAiB,KAAK,gBAAgB;AAAA,IACrD;AAAA;EAEF,SAAS;AAAA;AAAA,IAEP,0BAA0B;AACxB,iBAAW,MAAM;AACf,aAAK,gBAAgB;AAAA,MACvB,GAAG,GAAG;AAAA,IACR;AAAA;AAAA,IAEA,sBAAsB;AACpB,WAAK,iBAAiB,WAAW,MAAM;AACrC,YAAI,KAAK,eAAe;AACtB,eAAK,gBAAgB;AACrB,eAAK,cAAc;AACnB,eAAK,cAAa;AAAA,QACpB;AAAA,MACF,GAAG,GAAI;AAAA,IACT;AAAA;AAAA,IAEA,gBAAgB;AACd,WAAK,mBAAkB;AACvB,WAAK,gBAAgB,YAAY,MAAM;AACrC,YAAI,KAAK,cAAc,GAAG;AACxB,eAAK;AAAA,QACP,OAAO;AAEL,eAAK,mBAAkB;AAAA,QACzB;AAAA,MACF,GAAG,GAAI;AAAA,IACT;AAAA;AAAA,IAEA,qBAAqB;AACnB,UAAI,KAAK,eAAe;AACtB,sBAAc,KAAK,aAAa;AAChC,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACF;AAAA;AAAA,IAEA,iBAAiB;AACf,WAAK,mBAAkB;AACvB,UAAI,KAAK,gBAAgB;AACvB,qBAAa,KAAK,cAAc;AAChC,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACF;AAAA;AAAA,IAEA,mBAAmB,GAAG;AACpB,YAAM,WAAW,EAAE,OAAO;AAC1B,WAAK,cAAc;AAGnB,UAAI,KAAK,cAAc,GAAG;AACxB,aAAK,cAAa;AAAA,MACpB,OAAO;AAEL,aAAK,mBAAkB;AAAA,MACzB;AAAA,IACF;AAAA;AAAA,IAEA,aAAa;AACX,WAAK,eAAc;AACnB,WAAK,gBAAe;AAAA,IACtB;AAAA;AAAA,IAEA,cAAc;AACZ,WAAK,eAAc;AACnB,WAAK,gBAAe;AAAA,IACtB;AAAA;AAAA,IAEA,kBAAkB;AAChBA,oBAAAA,MAAI,SAAS;AAAA,QACX,KAAK;AAAA,OACN;AAAA,IACH;AAAA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxLA,GAAG,WAAW,eAAe;"}